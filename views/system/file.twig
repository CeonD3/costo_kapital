{% extends "system/main.twig" %}

{% block css %}
	<link rel='stylesheet' href='https://kendo.cdn.telerik.com/2020.3.915/styles/kendo.common.min.css' type='text/css'>
	<style>
		.slide-content {
			background-size: cover;
			background-attachment: fixed;
		}
		.card-panel-build{
			display: grid;
			margin: auto;
			max-width: 920px;
			border-radius: 10px;
		}
		.panel-body{
			overflow: auto;
		}
		.panel-sticky{
			width: 100%;
			margin: auto;
			left: 0;
			right: 0;
			text-align: center;
			position: sticky;
			top: 76px;
			display: inline-block;
			z-index: 2;
		}
	</style>
{% endblock %}

{% block content %}
	{% set data = rsp.data %}
	<section class="slide-content">
		<div class="slide-reflex">
			<div class="container container-custom">
				<div class="row justify-content-center">
					<div class="panel-body mb-1 panel-sticky">
						<div class="card-panel card-panel-build py-3">
							<div id="panel-acctions">
								<div class="text-center">
									<img src="/assets/image/loading.gif" height="80px" class="mb-2"><br>
									<span>Obteniendo datos</span>
								</div>
							</div>
						</div>
					</div>
					<div class="panel-body d-none" id="panel-report">
						<div class="card-panel card-panel-build">
							{% include 'export/report.twig' %}
						</div>
					</div>
				</div>
			</div>
		</div>
		<template id="template-acctions">
			<div class="panel-progress mb-3" style="background-color: #fff;">
				<div class="progress">
					<div class="progress-bar progress-bar-striped bg-info" role="progressbar" style="width: 0%" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">0%</div>
				</div>
				<span class="text-secondary mt-2">Espere, completando la renderizaci√≥n de todos los componentes.</span>
			</div>
			<div class="row">
				<div class="col-md-6 text-left">
					<h5 class="m-0 mt-2" id="title-export">REPORTE</h5>
				</div>
				<div class="col-md-6">
					<button type="button" id="btn-download" class="btn btn-three float-right" disabled><i class="fa fa-download mr-2" aria-hidden="true"></i>Descargar</button>
				</div>
			</div>
		</template>
	</section>
{% endblock %}

{% block js %}
	<script type='text/javascript' src='https://kendo.cdn.telerik.com/2020.3.915/js/kendo.all.min.js'></script>
	<script type="text/javascript">
		window.addEventListener('load', window.AppExportPDF.initBuildReport("{{ rsp.data.code }}", "{{ rsp.data.id }}"));
	</script>
{% endblock %}